<!DOCTYPE html><html class="" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="Yann Prono" property="og:site_name"><meta content="en-us" property="og:locale"><meta content="article" property="og:type"><meta content="https://mcdostone.github.io/articles/intro-3d-css/" property="og:url"><meta content="Yann Prono" property="og:title"><meta content="https:/mcdostone.github.io/assets/images/og-image.jpg" property="og:image"><meta content="452" property="og:image:width"><meta content="452" property="og:image:height"><meta content="This article is a modest introduction to 3D in CSS through an example. I share with you how I made a Minecraft creeper head in CSS and animated it with JavaScript." property="og:description"><meta content="summary" property="twitter:card"><meta content="https:/mcdostone.github.io/assets/images/og-image.jpg" property="twitter:image"><meta content="Yann Prono" property="twitter:title"><meta content="This article is a modest introduction to 3D in CSS through an example. I share with you how I made a Minecraft creeper head in CSS and animated it with JavaScript." property="twitter:description"><meta content="This article is a modest introduction to 3D in CSS through an example. I share with you how I made a Minecraft creeper head in CSS and animated it with JavaScript." name="description"><title>Introduction to 3D in CSS | Yann Prono</title><link href="/favicon-bfe765527d.svg" rel="icon" type="image/svg+xml"><link href="https://mcdostone.github.io/index.xml" rel="alternate" type="application/atom+xml" title="Atom feed"><script defer src="/assets/js/dark-0c32b4e2.js" type="module"></script><link href="/assets/css/style-d823d69a.css" rel="stylesheet"><link href="/assets/css/editor-e0c8908c.css" rel="stylesheet"><link href="/articles/intro-3d-css/assets/index-7bd7509f.css" rel="stylesheet"></head><body><header class="header"><div class="container"><div><a href="/" class="active">Blog</a></div></div></header><main class="article-container"><article><header class=""><h1>Introduction to 3D in CSS</h1><time class="article-published-on" datetime="2022-07-21">July 21, 2022</time></header><div class="demo"><div><div class="creeper"><picture style="--pc: #5ab74f" class="side front"><source srcset="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side back"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side top"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side bottom"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side left"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side right"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture></div></div><q class="help">H E L P !</q></div><p>This article is a modest introduction to 3D in CSS through an example. I share with you how I made a Minecraft creeper head in CSS and animated it with JavaScript. This article is composed of 2 parts:</p><ol><li><p>Modeling a Minecraft creeper head.</p></li><li><p>Making the creeper alive.</p></li></ol><h2 id="modeling-the-cube" tabindex="-1">Modeling the cube <a href="#modeling-the-cube" aria-label="anchor" class="header-anchor"><span></span></a></h2><p>Modeling the creeper head is like modeling a cube. I use 2 assets:</p><ul><li><p>The face of the creeper, <code>face.avif</code></p></li><li><p>The side of his head, <code>side.avif</code></p></li></ul><p><a href="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.avif" aria-label="download face.webp" class="asset"><picture style="--pc: #5ab74f"><source srcset="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.jpeg" width="120"></picture></a><a href="/articles/intro-3d-css/assets/side-WygM7n4con.avif" aria-label="download side.webp" class="asset"><picture style="--pc: #67c25a"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture></a></p><p>Each side of the cube is represented by an <code>img</code> tag and is nested in a <code>div</code> element. We need 6 images for the 6 square faces:</p><figure class="code-snippet"><span class="language-tag">HTML</span><pre><code class="code-block-inner"><span class="line"><span class="h33">&lt;</span><span class="h4d">div</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"creeper"</span><span class="h33">></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"face.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side front"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side back"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side top"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side bottom"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side left"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side right"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33"><span class="h4d">div</span><span class="h33">></span></span>
<span class="line"></span></span></code></pre></figure><p>By default, HTML elements are positioned in a two-dimensional space, meaning that everything is <code>flat</code>.</p><figure class="border"><div class="cube-in-space"><div class="creeper"><span class="axis x"></span> <span class="axis y"></span><picture style="--pc: #5ab74f" class="side front"><source srcset="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.jpeg" width="120"></picture></div></div><figcaption>Is it a menacing flat mouth or a hairy moustache?</figcaption></figure><p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-style"><code>transform-style</code></a> is a CSS property indicating the way children elements are positioned in the space. With the keyword <code>preserve-3d</code>, we unlock the Z dimension and add some depth to the page. We can now position elements relative to the X, Y and Z axis. The CSS function <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translateZ"><code>translateZ</code></a> position an element closer or farther away from the viewer:</p><figure class="code-snippet"><span class="language-tag">CSS</span><pre><code class="code-block-inner"><span class="line"><span class="h07">.creeper</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  </span><span class="h64">--size</span><span class="h33">: </span><span class="h07">128</span><span class="h69">px</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h64">--half-size</span><span class="h33">: </span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">) </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span><span class="h33">);</span></span>
<span class="line"></span>
<span class="line"><span class="h33">  </span><span class="h07">margin</span><span class="h33">: </span><span class="h07">0</span><span class="h33"> </span><span class="h07">auto</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h07">width</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">  </span><span class="h07">height</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">  </span><span class="h7a">/* 👇 Elements are now positioned in a 3D space */</span></span>
<span class="line"><span class="h33">  </span><span class="h07">transform-style</span><span class="h33">: </span><span class="h07">preserve-3d</span><span class="h33">;</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h07">.side</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  </span><span class="h07">position</span><span class="h33">: </span><span class="h07">absolute</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h07">width</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">  </span><span class="h07">height</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h07">.front</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateZ</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">)) }</span></span>
<span class="line"><span class="h07">.back</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateZ</span><span class="h33">(</span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">) </span><span class="h69">*</span><span class="h33"> </span><span class="h07">-1</span><span class="h33">)) }</span></span>
<span class="line"><span class="h07">.top</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateY</span><span class="h33">(</span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">) </span><span class="h69">*</span><span class="h33"> </span><span class="h07">-1</span><span class="h33">)) </span><span class="h07">rotateX</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"><span class="h07">.left</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateX</span><span class="h33">(</span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">) </span><span class="h69">*</span><span class="h33"> </span><span class="h07">-1</span><span class="h33">)) </span><span class="h07">rotateY</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"><span class="h07">.bottom</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateY</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">)) </span><span class="h07">rotateX</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"><span class="h07">.right</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateX</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">)) </span><span class="h07">rotateY</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"></span></code></pre></figure><p>The following figure can help you understand how the elements are positioned in the 3D space:</p><figure class="border"><div class="cube-in-space animated"><span>Hover me <span class="hover-me">✋</span></span><div class="creeper"><span class="axis x"></span> <span class="axis y"></span> <span class="axis z"></span><picture style="--pc: #5ab74f" class="side front"><source srcset="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side back"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side top"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side bottom"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side left"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side right"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture></div></div><figcaption></figcaption></figure><h2 id="bringing-the-cube-to-life" tabindex="-1">Bringing the cube to life <a href="#bringing-the-cube-to-life" aria-label="anchor" class="header-anchor"><span></span></a></h2><p>This part is optional. The modeling is over, good job Jackson<a href="https://www.youtube.com/watch?v=HW7hN4NI4n0&t=51s">.</a> The character looks very static though: I would like him to follow the cursor for more user interaction. To do so, we need to compute 2 angles. Once calculated, we can use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotateX"><code>rotateX</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotateY"><code>rotateY</code></a> to position the cube relative to the axis of rotation X and Y. It has to be done in JavaScript:</p><div class="demo-3"><div class="creeper" id="demo"><picture style="--pc: #5ab74f" class="side front"><source srcset="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/face-GAWOCXT8Fe.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side back"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side top"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side bottom"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side right"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture><picture style="--pc: #67c25a" class="side left"><source srcset="/articles/intro-3d-css/assets/side-WygM7n4con.avif 120w" type="image/avif"><img alt="" decoding="async" height="120" loading="lazy" src="/articles/intro-3d-css/assets/side-WygM7n4con.jpeg" width="120"></picture></div></div><div class="editor tabs" style="--height: 861px"><div class="editor-container" role="tablist"><div class="tab"><input id="tab-0" name="tab-group-1" type="radio" checked> <label for="tab-0" role="tab">HTML</label><pre role="tabpanel"><code class="code-block-inner"><span class="line"><span class="h33">&lt;</span><span class="h4d">div</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"creeper"</span><span class="h33"> </span><span class="h07">id</span><span class="h33">=</span><span class="hbb">"demo"</span><span class="h33">></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"face.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side front"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side back"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side top"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side bottom"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side right"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33">  &lt;</span><span class="h4d">img</span><span class="h33"> </span><span class="h07">src</span><span class="h33">=</span><span class="hbb">"side.avif"</span><span class="h33"> </span><span class="h07">alt</span><span class="h33">=</span><span class="hbb">""</span><span class="h33"> </span><span class="h07">class</span><span class="h33">=</span><span class="hbb">"side left"</span><span class="h33"> /></span></span>
<span class="line"><span class="h33"><span class="h4d">div</span><span class="h33">></span></span>
<span class="line"></span></span></code></pre></div><div class="tab"><input id="tab-1" name="tab-group-1" type="radio"> <label for="tab-1" role="tab">CSS</label><pre role="tabpanel"><code class="code-block-inner"><span class="line"><span class="h07">.creeper</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  </span><span class="h64">--size</span><span class="h33">: </span><span class="h07">128</span><span class="h69">px</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h64">--half-size</span><span class="h33">: </span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">) </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span><span class="h33">);</span></span>
<span class="line"></span>
<span class="line"><span class="h33">  </span><span class="h07">margin</span><span class="h33">: </span><span class="h07">0</span><span class="h33"> </span><span class="h07">auto</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h07">width</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">  </span><span class="h07">height</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">  </span><span class="h7a">/* 👇 Elements are now positioned in a 3D space */</span></span>
<span class="line"><span class="h33">  </span><span class="h07">transform-style</span><span class="h33">: </span><span class="h07">preserve-3d</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h7a">/* Make the animation smoother */</span></span>
<span class="line"><span class="h33">  </span><span class="h07">transition</span><span class="h33">: </span><span class="h07">0.05</span><span class="h69">s</span><span class="h33"> transform </span><span class="h07">ease-out</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">rotateX</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--angle-x</span><span class="h33">, </span><span class="h07">0</span><span class="h69">deg</span><span class="h33">)) </span><span class="h07">rotateY</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--angle-y</span><span class="h33">, </span><span class="h07">0</span><span class="h69">deg</span><span class="h33">))</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h07">.side</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  </span><span class="h07">position</span><span class="h33">: </span><span class="h07">absolute</span><span class="h33">;</span></span>
<span class="line"><span class="h33">  </span><span class="h07">width</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">);</span></span>
<span class="line"><span class="h33">  </span><span class="h07">height</span><span class="h33">: </span><span class="h07">var</span><span class="h33">(</span><span class="h64">--size</span><span class="h33">)</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h07">.front</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateZ</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">)) }</span></span>
<span class="line"><span class="h07">.back</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateZ</span><span class="h33">(</span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">) </span><span class="h69">*</span><span class="h33"> </span><span class="h07">-1</span><span class="h33">)) }</span></span>
<span class="line"><span class="h07">.top</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateY</span><span class="h33">(</span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">) </span><span class="h69">*</span><span class="h33"> </span><span class="h07">-1</span><span class="h33">)) </span><span class="h07">rotateX</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"><span class="h07">.left</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateX</span><span class="h33">(</span><span class="h07">calc</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">) </span><span class="h69">*</span><span class="h33"> </span><span class="h07">-1</span><span class="h33">)) </span><span class="h07">rotateY</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"><span class="h07">.bottom</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateY</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">)) </span><span class="h07">rotateX</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"><span class="h07">.right</span><span class="h33"> { </span><span class="h07">transform</span><span class="h33">: </span><span class="h07">translateX</span><span class="h33">(</span><span class="h07">var</span><span class="h33">(</span><span class="h64">--half-size</span><span class="h33">)) </span><span class="h07">rotateY</span><span class="h33">(</span><span class="h07">90</span><span class="h69">deg</span><span class="h33">) }</span></span>
<span class="line"></span></code></pre></div><div class="tab"><input id="tab-2" name="tab-group-1" type="radio"> <label for="tab-2" role="tab">TS</label><pre role="tabpanel"><code class="code-block-inner"><span class="line"><span class="h69">type</span><span class="h33"> </span><span class="h64">Options</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  </span><span class="h64">maxAngleX</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span></span>
<span class="line"><span class="h33">  </span><span class="h64">maxAngleY</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h69">const</span><span class="h33"> </span><span class="h4a">map</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> (</span><span class="h64">value</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">, </span><span class="h64">low1</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">, </span><span class="h64">high1</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">, </span><span class="h64">low2</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">, </span><span class="h64">high2</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">) </span><span class="h69">=></span><span class="h33"> low2 </span><span class="h69">+</span><span class="h33"> ((high2 </span><span class="h69">-</span><span class="h33"> low2) </span><span class="h69">*</span><span class="h33"> (value </span><span class="h69">-</span><span class="h33"> low1)) </span><span class="h69">/</span><span class="h33"> (high1 </span><span class="h69">-</span><span class="h33"> low1)</span></span>
<span class="line"></span>
<span class="line"><span class="h69">function</span><span class="h33"> </span><span class="h4a">rotate</span><span class="h33">(</span><span class="h64">element</span><span class="h69">:</span><span class="h33"> </span><span class="h64">HTMLElement</span><span class="h33">, </span><span class="h64">angleX</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">, </span><span class="h64">angleY</span><span class="h69">:</span><span class="h33"> </span><span class="h07">number</span><span class="h33">)</span><span class="h69">:</span><span class="h33"> </span><span class="h07">void</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  element.style.</span><span class="h4a">setProperty</span><span class="h33">(</span><span class="hbb">'--angle-x'</span><span class="h33">, </span><span class="hbb">`${</span><span class="h33">angleX</span><span class="hbb">}deg`</span><span class="h33">)</span></span>
<span class="line"><span class="h33">  element.style.</span><span class="h4a">setProperty</span><span class="h33">(</span><span class="hbb">'--angle-y'</span><span class="h33">, </span><span class="hbb">`${</span><span class="h33">angleY</span><span class="hbb">}deg`</span><span class="h33">)</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h69">function</span><span class="h33"> </span><span class="h4a">handleOrientation</span><span class="h33">(</span><span class="h64">element</span><span class="h69">:</span><span class="h33"> </span><span class="h64">HTMLElement</span><span class="h33">, </span><span class="h64">options</span><span class="h69">:</span><span class="h33"> </span><span class="h64">Options</span><span class="h33">)</span><span class="h69">:</span><span class="h33"> </span><span class="h07">void</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  window.</span><span class="h4a">addEventListener</span><span class="h33">(</span><span class="hbb">'deviceorientation'</span><span class="h33">, (</span><span class="h64">event</span><span class="h69">:</span><span class="h33"> </span><span class="h64">DeviceOrientationEvent</span><span class="h33">) </span><span class="h69">=></span><span class="h33"> {</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">decY</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> </span><span class="h4a">map</span><span class="h33">((event.gamma </span><span class="h69">||</span><span class="h33"> </span><span class="h07">0</span><span class="h33">) </span><span class="h69">+</span><span class="h33"> </span><span class="h07">180</span><span class="h33">, </span><span class="h07">0</span><span class="h33">, </span><span class="h07">360</span><span class="h33">, </span><span class="h69">-</span><span class="h33">options.maxAngleY, options.maxAngleY)</span></span>
<span class="line"><span class="h33">    </span><span class="h4a">rotate</span><span class="h33">(element, </span><span class="h07">0</span><span class="h33">, </span><span class="h69">-</span><span class="h33">decY)</span></span>
<span class="line"><span class="h33">  })</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h69">function</span><span class="h33"> </span><span class="h4a">handleCursor</span><span class="h33">(</span><span class="h64">element</span><span class="h69">:</span><span class="h33"> </span><span class="h64">HTMLElement</span><span class="h33">, </span><span class="h64">options</span><span class="h69">:</span><span class="h33"> </span><span class="h64">Options</span><span class="h33">)</span><span class="h69">:</span><span class="h33"> </span><span class="h07">void</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  window.</span><span class="h4a">addEventListener</span><span class="h33">(</span><span class="hbb">'mousemove'</span><span class="h33">, (</span><span class="h64">event</span><span class="h69">:</span><span class="h33"> </span><span class="h64">MouseEvent</span><span class="h33">) </span><span class="h69">=></span><span class="h33"> {</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">elementRect</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> element.</span><span class="h4a">getBoundingClientRect</span><span class="h33">()</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">originX</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> elementRect.left </span><span class="h69">+</span><span class="h33"> elementRect.width </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">originY</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> elementRect.top </span><span class="h69">+</span><span class="h33"> elementRect.height </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">width</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> window.innerWidth</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">height</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> window.innerHeight</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">angleX</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> </span><span class="h4a">map</span><span class="h33">(event.clientY </span><span class="h69">-</span><span class="h33"> originY, </span><span class="h69">-</span><span class="h33">height </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span><span class="h33">, height </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span><span class="h33">, </span><span class="h69">-</span><span class="h33">options.maxAngleY, options.maxAngleY)</span></span>
<span class="line"><span class="h33">    </span><span class="h69">const</span><span class="h33"> </span><span class="h07">angleY</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> </span><span class="h4a">map</span><span class="h33">(event.clientX </span><span class="h69">-</span><span class="h33"> originX, </span><span class="h69">-</span><span class="h33">width </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span><span class="h33">, width </span><span class="h69">/</span><span class="h33"> </span><span class="h07">2</span><span class="h33">, </span><span class="h69">-</span><span class="h33">options.maxAngleX, options.maxAngleX)</span></span>
<span class="line"><span class="h33">    </span><span class="h4a">rotate</span><span class="h33">(element, </span><span class="h69">-</span><span class="h33">angleX, angleY)</span></span>
<span class="line"><span class="h33">  })</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span>
<span class="line"><span class="h69">const</span><span class="h33"> </span><span class="h07">creeper</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> document.</span><span class="h4a">querySelector</span><span class="h33">(</span><span class="hbb">'#demo'</span><span class="h33">) </span><span class="h69">as</span><span class="h33"> </span><span class="h64">HTMLElement</span></span>
<span class="line"><span class="h69">const</span><span class="h33"> </span><span class="h07">options</span><span class="h69">:</span><span class="h33"> </span><span class="h64">Options</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> { maxAngleX: </span><span class="h07">40</span><span class="h33">, maxAngleY: </span><span class="h07">20</span><span class="h33"> }</span></span>
<span class="line"><span class="h7a">// For touch screens</span></span>
<span class="line"><span class="h69">if</span><span class="h33"> (window.DeviceOrientationEvent </span><span class="h69">&&</span><span class="h33"> </span><span class="hbb">'ontouchstart'</span><span class="h33"> </span><span class="h69">in</span><span class="h33"> window) {</span></span>
<span class="line"><span class="h33">  </span><span class="h4a">handleOrientation</span><span class="h33">(creeper, </span><span class="h07">Object</span><span class="h33">.</span><span class="h4a">assign</span><span class="h33">({}, options, { maxAngleY: </span><span class="h07">80</span><span class="h33"> }))</span></span>
<span class="line"><span class="h33">} </span><span class="h69">else</span><span class="h33"> {</span></span>
<span class="line"><span class="h33">  </span><span class="h4a">handleCursor</span><span class="h33">(creeper, options)</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span></code></pre></div></div></div><script>"use strict";const map=(e,n,t,o,i)=>o+(i-o)*(e-n)/(t-n);function rotate(e,n,t){e.style.setProperty("--angle-x",`${n}deg`),e.style.setProperty("--angle-y",`${t}deg`)}function handleOrientation(e,n){window.addEventListener("deviceorientation",(t=>{const o=map((t.gamma||0)+180,0,360,-n.maxAngleY,n.maxAngleY);rotate(e,0,-o)}))}function handleCursor(e,n){window.addEventListener("mousemove",(t=>{const o=e.getBoundingClientRect(),i=o.left+o.width/2,a=o.top+o.height/2,r=window.innerWidth,d=window.innerHeight,l=map(t.clientY-a,-d/2,d/2,-n.maxAngleY,n.maxAngleY),s=map(t.clientX-i,-r/2,r/2,-n.maxAngleX,n.maxAngleX);rotate(e,-l,s)}))}const creeper=document.querySelector("#demo"),options={maxAngleX:40,maxAngleY:20};window.DeviceOrientationEvent&&"ontouchstart"in window?handleOrientation(creeper,Object.assign({},options,{maxAngleY:80})):handleCursor(creeper,options);</script></article></main><footer class="container"><div class="social-networks"><a href="https://github.com/mcdostone" aria-label="github"><svg class="icon github"><use href="/assets/images/icons-231b49900a.svg#github"></use></svg> </a><a href="/index.xml" aria-label="rss"><svg class="icon rss"><use href="/assets/images/icons-231b49900a.svg#rss"></use></svg></a><div class="theme-selector"><button aria-label="Open a dialog box to choose a theme" type="button" aria-haspopup="menu"><svg class="icon theme"><use href="/assets/images/icons-231b49900a.svg#theme-light"></use></svg></button><dialog><form method="dialog"><button aria-label="switch to OS theme" type="button" value="" aria-selected=""><svg><use href="/assets/images/icons-231b49900a.svg#theme-system"></use></svg>OS Default</button> <button aria-label="switch to light theme" type="button" value="light"><svg><use href="/assets/images/icons-231b49900a.svg#theme-light"></use></svg>Light</button> <button aria-label="switch to dark theme" type="button" value="dark"><svg><use href="/assets/images/icons-231b49900a.svg#theme-dark"></use></svg>Dark</button></form></dialog></div></div></footer></body></html>