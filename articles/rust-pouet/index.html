<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><title>L'importance du CLI au coeur des équipes | Yann Prono</title><script src="/assets/js/dark.ts-BPTfhiMj.js" type="module"></script><link href="/assets/css/style-cr_gGQ5v.css" rel="stylesheet"><script src="/assets/js/photoswipe.ts-CMn7jvfU.js" type="module"></script><link href="/assets/css/photoswipe-CERfYjVr.css" rel="stylesheet"><script src="/assets/js/search.ts-SXIHxF-U.js" type="module"></script><meta content="Yann Prono" property="og:site_name"><meta content="en-us" property="og:locale"><meta content="article" property="og:type"><meta content="https://mcdostone.github.io/articles/rust-pouet/" property="og:url"><meta content="L'importance du CLI au coeur des équipes" property="og:title"><meta content="https:/mcdostone.github.io/assets/images/og-image.jpg" property="og:image"><meta content="452" property="og:image:width"><meta content="452" property="og:image:height"><meta content="A trick pour utiliser Rust dans vos applications web." property="og:description"><meta content="summary" property="twitter:card"><meta content="https:/mcdostone.github.io/assets/images/og-image.jpg" property="twitter:image"><meta content="L'importance du CLI au coeur des équipes" property="twitter:title"><meta content="A trick pour utiliser Rust dans vos applications web." property="twitter:description"><meta content="same-origin" name="view-transition"><meta content="A trick pour utiliser Rust dans vos applications web." name="description"><link href="/favicon-e05c04e252.svg" rel="icon" type="image/svg+xml"><link href="https://mcdostone.github.io/index.xml" rel="alternate" type="application/atom+xml" title="Atom feed"><link href="https://pouet.chapril.org/@yannp" rel="me"></head><body><script>document.body.id = localStorage.getItem('theme')</script><header class="header"><div class="container"><div><a href="/" class="active">Blog</a> <a href="/recipes/">Recipes</a> <a href="/links/">Links</a></div><div><div class="theme-selector"><button aria-label="Open a dialog box to choose a theme" type="button" aria-haspopup="menu"><svg class="icon theme"><use href="/assets/images/icons-6184648945.svg#theme-light"></use></svg></button><dialog><form method="dialog"><button aria-label="switch to OS theme" type="button" value="" aria-pressed="true"><svg><use href="/assets/images/icons-6184648945.svg#theme-system"></use></svg> OS Default</button> <button aria-label="switch to light theme" type="button" value="light"><svg><use href="/assets/images/icons-6184648945.svg#theme-light"></use></svg> Light</button> <button aria-label="switch to dark theme" type="button" value="dark"><svg><use href="/assets/images/icons-6184648945.svg#theme-dark"></use></svg> Dark</button></form></dialog></div><button aria-label="open search dialog" id="search-button"><svg class="icon search"><use href="/assets/images/icons-6184648945.svg#search"></use></svg> <span>⌘ K</span></button></div></div></header><dialog data-endpoint="/assets/search.json" id="search-dialog"><form class="search-topbar"><label for="search"><svg class="icon search"><use href="/assets/images/icons-6184648945.svg#search"></use></svg></label> <input autocomplete="off" autofocus id="search" placeholder="Search for articles, recipes, links" type="search"> <button aria-label="close" class="search-cancel" formmethod="dialog">Cancel</button></form><ul class="results"></ul><div class="hidden no-results-container"><img alt="" decoding="async" height="287" loading="lazy" src="/assets/images/no-search-result-2ttvJm-hCv.svg" style="--pc: transparent" width="300"> <span>No results found</span></div></dialog><main class="content-container"><article><header><h1>L'importance du CLI au coeur des équipes</h1><div class="article-metadata"><time class="article-published-on" datetime="2025-08-26">26 août 2025</time></div></header><p>Les outils en ligne de commandes (CLI) sont des outils essentiels dans le</p><p>Une CLI est</p><ul><li><p>c'est un outil qu'on peut sortir rapidement de sa poche : Spotlight → Ghostty → <code>my-cli do-that</code>.</p></li><li><p>leur simplicitié d'usage en font des outils redoutables pour automatiser des taches pénibles.</p></li><li><p>Combiner plusieurs d'entre eux pour arriver a résoudre des problemes plus difficile.</p></li><li><p>C'est controllable via l'utilisation du clavier, on est donc efficace dans les actions que l'on effectue.</p></li><li><p>Ce sont des outils qui sont facilement distribuables sur des machines</p></li><li><p>Une CLI est un outil qui évolue très rapidement, permettant d'ajouter de nouvelles fonctionnalités ou de corriger des bugs sans perturber l'expérience utilisateur.</p></li></ul><div class="heading"><h2 id="automatiser-ce-qui">Automatiser ce qui</h2><a href="#automatiser-ce-qui" aria-label="Section titled Automatiser ce qui" class="header-anchor"><span></span></a></div><p>Comme expliqué précédemment, une CLI peut nous servir a devoir automatiser des tâches.</p><p>Mais on peut également considérer une CLI comme un client d'une API.</p><div class="heading"><h2 id="rust-%C3%A0-la-rescousse">Rust à la rescousse</h2><a href="#rust-%C3%A0-la-rescousse" aria-label="Section titled Rust à la rescousse" class="header-anchor"><span></span></a></div><p>La MAIF s'est tourné principalement vers la JVM (java/Kotlin) pour développer sa stack logicielle. J'apprécie particulièrement Java mais il faut reconnaître qu'une JVM est un poil lent à démarrer. Et moi qui est l'habitude de sortir le terminal à tout bout de champ, cette lenteur offre une experience peu convaincante. Et puis je vais être honnête, j'ai un coup de coeur pour Rust. En plus d'avoir un run time plus rapide: Rus</p><p>Sans surprise, j'ai choisi la crate <code>clap</code> pour concevoir ma CLI. Et je dois dire que l'API proposé est vraiment séduisante:</p><figure class="code-snippet"><span class="language-tag">rust</span><pre><code class="code-block-inner"><span><span class="h10">#[derive(</span><span class="h02">Parser</span><span class="h10">)]</span></span>
<span><span class="h10">#[command(version, about, long_about </span><span class="h09">=</span><span> </span><span class="h02">None</span><span class="h10">)]</span></span>
<span><span class="h10">#[command(propagate_version </span><span class="h09">=</span><span class="h10"> true)]</span></span>
<span><span class="h09">pub</span><span> </span><span class="h09">enum</span><span> </span><span class="h02">MyCli</span><span class="h10"> {</span></span>
<span><span class="h04">    /// Generate shell completion scripts</span></span>
<span><span>    </span><span class="h02">Completions</span><span class="h10">(</span><span class="h02">CompletionsCommand</span><span class="h10">),</span></span>
<span><span class="h10">    #[clap(aliases </span><span class="h09">=</span><span> </span><span class="h09">&</span><span class="h10">[</span><span class="h00">"ctx"</span><span class="h10">, </span><span class="h00">"c"</span><span class="h10">])]</span></span>
<span><span class="h04">    /// Name of the context to use</span></span>
<span><span>    </span><span class="h02">Context</span><span class="h10">(</span><span class="h02">ContextCommand</span><span class="h10">),</span></span>
<span><span class="h04">    /// Say Hello</span></span>
<span><span>    </span><span class="h02">Hello</span><span class="h10">(</span><span class="h02">HelloCommand</span><span class="h10">),</span></span>
<span><span class="h04">    /// Self update the tool</span></span>
<span><span>    </span><span class="h02">Update</span><span class="h10">(</span><span class="h02">UpdateCommand</span><span class="h10">),</span></span>
<span><span class="h10">}</span></span>
<span></span></code></pre></figure><p>Avec ces lignes de code :</p><ol><li><p>Je définis ma CLI,</p></li><li><p>J'ai plusieurs sous-commandes,</p></li><li><p>la documentation dans ma codebase est utilisé dans le <code>--help</code>,</p></li><li><p>Je peux ajouter des aliases sur mes sous-commandes,</p></li><li><p>La version de ma CLI correspond à la version défini dans mon <code>Cargo.toml</code>.</p></li></ol><figure class="code-snippet"><span class="language-tag">bash</span><pre><code class="code-block-inner"><span><span class="h02">Usage:</span><span> </span><span class="h00">my-cli</span><span class="h10"> [OPTIONS] </span><span class="h09">&lt;</span><span class="h10">COMMAND</span><span class="h09">></span></span>
<span></span>
<span><span class="h02">Commands:</span></span>
<span><span>  </span><span class="h02">completions</span><span>  </span><span class="h00">Generate</span><span> </span><span class="h00">shell</span><span> </span><span class="h00">completion</span><span> </span><span class="h00">scripts</span></span>
<span><span>  </span><span class="h02">context</span><span>      </span><span class="h00">Name</span><span> </span><span class="h00">of</span><span> </span><span class="h00">the</span><span> </span><span class="h00">context</span><span> </span><span class="h00">to</span><span> </span><span class="h00">use</span></span>
<span><span>  </span><span class="h02">hello</span><span>        </span><span class="h00">Say</span><span> </span><span class="h00">Hello</span></span>
<span><span>  </span><span class="h02">update</span><span>       </span><span class="h00">Self</span><span> </span><span class="h00">update</span><span> </span><span class="h00">the</span><span> </span><span class="h00">tool</span></span>
<span><span>  </span><span class="h02">help</span><span>         </span><span class="h00">Print</span><span> </span><span class="h00">this</span><span> </span><span class="h00">message</span><span> </span><span class="h00">or</span><span> </span><span class="h00">the</span><span> </span><span class="h00">help</span><span> </span><span class="h00">of</span><span> </span><span class="h00">the</span><span> </span><span class="h00">given</span><span> </span><span class="h00">subcommand</span><span class="h10">(</span><span class="h02">s</span><span class="h10">)</span></span>
<span></span></code></pre></figure><p>Lorsque que je commence une nouvelle aventure professionnelle, je constate fréquemment que les Lorsque j'ai rejoint la MAIF, j'ai constaté l'absence d'outils de la sorte, que soit au niveau de l'équipe ou bien mêmes de l'entreprise. Ma premiers travaux ont consistés à faire une migration de de données alors j'ai nommé mon outil <code>migrator</code>.</p><figure class="code-snippet"><span class="language-tag">bash</span><pre><code class="code-block-inner"><span><span class="h02">completions</span><span>             </span><span class="h00">Generate</span><span> </span><span class="h00">shell</span><span> </span><span class="h00">completion</span><span> </span><span class="h00">scripts</span></span>
<span><span>  </span><span class="h02">context</span><span>               </span><span class="h00">Name</span><span> </span><span class="h00">of</span><span> </span><span class="h00">the</span><span> </span><span class="h00">context</span><span> </span><span class="h00">to</span><span> </span><span class="h00">use</span></span>
<span><span>  </span><span class="h02">new</span><span>                   </span><span class="h00">Join</span><span> </span><span class="h00">the</span><span> </span><span class="h00">adventure</span><span> </span><span class="h00">and</span><span> </span><span class="h00">a</span><span> </span><span class="h00">new</span><span> </span><span class="h00">rust</span><span> </span><span class="h00">crate</span><span> </span><span class="h00">dedicated</span><span> </span><span class="h00">to</span><span> </span><span class="h00">your</span><span> </span><span class="h00">team</span></span>
<span><span>  </span><span class="h02">hello</span><span>                 </span><span class="h00">An</span><span> </span><span class="h00">easy</span><span> </span><span class="h00">way</span><span> </span><span class="h00">to</span><span> </span><span class="h00">configure</span><span> </span><span class="h00">your</span><span> </span><span class="h00">machine,</span><span> </span><span class="h00">the</span><span> </span><span class="h00">JVM,</span><span> </span><span class="h00">nexus</span><span> </span><span class="h00">etc...</span></span>
<span><span>  </span><span class="h02">update</span><span>                </span><span class="h00">Update</span><span> </span><span class="h00">achraf</span></span>
<span><span>  </span><span class="h02">logs</span><span>                  </span><span class="h00">Wrapper</span><span> </span><span class="h00">of</span><span> </span><span class="h00">'kubectl logs'.</span><span> </span><span class="h00">No</span><span> </span><span class="h00">need</span><span> </span><span class="h00">to</span><span> </span><span class="h00">know</span><span> </span><span class="h00">the</span><span> </span><span class="h00">cluster,</span><span> </span><span class="h00">nor</span><span> </span><span class="h00">the</span><span> </span><span class="h00">namespace,</span><span> </span><span class="h00">nor</span><span> </span><span class="h00">the</span><span> </span><span class="h00">pod</span><span> </span><span class="h00">ID</span></span>
<span><span>  </span><span class="h02">open</span><span>                  </span><span class="h00">Type</span><span> </span><span class="h00">'achraf open kitsune tdv2'</span><span> </span><span class="h00">to</span><span> </span><span class="h00">open</span><span> </span><span class="h00">a</span><span> </span><span class="h00">browser</span><span> </span><span class="h00">tab</span><span> </span><span class="h00">for</span><span> </span><span class="h00">you.</span><span> </span><span class="h00">It</span><span> </span><span class="h00">works</span><span> </span><span class="h00">with</span><span> </span><span class="h00">kitsune,</span><span> </span><span class="h00">Openshift,</span><span> </span><span class="h00">Jenkins,</span><span> </span><span class="h00">AKHQ...</span></span>
<span><span>  </span><span class="h02">ariane</span><span>                </span><span class="h00">What</span><span> </span><span class="h00">horoquartz</span><span> </span><span class="h00">is</span><span> </span><span class="h00">supposed</span><span> </span><span class="h00">to</span><span> </span><span class="h00">do</span><span> </span><span class="h00">without</span><span> </span><span class="h00">any</span><span> </span><span class="h00">human</span><span> </span><span class="h00">intervention.</span><span> </span><span class="h00">This</span><span> </span><span class="h00">command</span><span> </span><span class="h00">keeps</span><span> </span><span class="h00">track</span><span> </span><span class="h00">of</span><span> </span><span class="h00">telework/office</span><span> </span><span class="h00">hours</span><span> </span><span class="h00">for</span><span> </span><span class="h00">you</span></span>
<span><span>  </span><span class="h02">vault</span><span>                 </span><span class="h00">Open</span><span> </span><span class="h00">your</span><span> </span><span class="h00">personal</span><span> </span><span class="h00">vault</span></span>
<span><span>  </span><span class="h02">vpn</span><span>                   </span><span class="h00">connect</span><span> </span><span class="h00">to</span><span> </span><span class="h00">the</span><span> </span><span class="h00">VPN</span></span>
<span><span>  </span><span class="h02">get</span><span>                   </span><span class="h00">Try</span><span> </span><span class="h00">its</span><span> </span><span class="h00">best</span><span> </span><span class="h00">to</span><span> </span><span class="h00">find</span><span> </span><span class="h00">data</span><span> </span><span class="h00">in</span><span> </span><span class="h00">Kitsune</span></span>
<span><span>  </span><span class="h02">configure</span><span>             </span><span class="h00">Open</span><span> </span><span class="h00">the</span><span> </span><span class="h00">configuration</span><span> </span><span class="h00">file</span></span>
<span><span>  </span><span class="h02">yozefu</span><span>                </span><span class="h00">Akhq</span><span> </span><span class="h00">but</span><span> </span><span class="h00">butter</span></span>
<span><span>  </span><span class="h02">assyst</span><span>                </span><span class="h00">Declare</span><span> </span><span class="h00">your</span><span> </span><span class="h00">Assyst</span><span> </span><span class="h00">change</span><span> </span><span class="h00">without</span><span> </span><span class="h00">the</span><span> </span><span class="h00">pain</span><span> </span><span class="h00">in</span><span> </span><span class="h00">the</span><span> </span><span class="h00">ass</span></span>
<span><span>  </span><span class="h02">ssh</span><span>                   </span><span class="h00">SSH</span><span> </span><span class="h00">to</span><span> </span><span class="h00">a</span><span> </span><span class="h00">container</span></span>
<span><span>  </span><span class="h02">deploy</span><span>                </span><span class="h00">Deploy</span><span> </span><span class="h00">an</span><span> </span><span class="h00">application</span></span>
<span><span>  </span><span class="h02">ui</span><span>                    </span><span class="h00">An</span><span> </span><span class="h00">alternative</span><span> </span><span class="h00">to</span><span> </span><span class="h00">Kitsune</span><span> </span><span class="h00">frontend</span></span>
<span><span>  </span><span class="h02">env</span><span>                   </span><span class="h00">Generate</span><span> </span><span class="h00">env</span><span> </span><span class="h00">var</span><span> </span><span class="h00">or</span><span> </span><span class="h00">env</span><span> </span><span class="h00">file</span><span> </span><span class="h00">to</span><span> </span><span class="h00">use</span><span> </span><span class="h00">to</span><span> </span><span class="h00">start</span><span> </span><span class="h00">the</span><span> </span><span class="h00">app</span><span> </span><span class="h00">locally.</span><span> </span><span class="h00">Certificates</span><span> </span><span class="h00">are</span><span> </span><span class="h00">also</span><span> </span><span class="h00">downloaded</span></span>
<span><span>  </span><span class="h02">mutate</span><span>                </span><span class="h00">Update</span><span> </span><span class="h00">a</span><span> </span><span class="h00">kitsune</span><span> </span><span class="h00">resource</span></span>
<span><span>  </span><span class="h02">full-synchro</span><span>          </span><span class="h00">Run</span><span> </span><span class="h00">a</span><span> </span><span class="h00">full</span><span> </span><span class="h00">synchronisation</span><span> </span><span class="h00">by</span><span> </span><span class="h00">calling</span><span> </span><span class="h00">the</span><span> </span><span class="h00">orchestrator</span><span> </span><span class="h00">API</span></span>
<span><span>  </span><span class="h02">full-synchro-csv</span><span>      </span><span class="h00">Run</span><span> </span><span class="h00">a</span><span> </span><span class="h00">full</span><span> </span><span class="h00">synchronisation</span><span> </span><span class="h00">by</span><span> </span><span class="h00">calling</span><span> </span><span class="h00">the</span><span> </span><span class="h00">orchestrator</span><span> </span><span class="h00">API</span><span class="h10"> (for </span><span class="h00">CSV</span><span> </span><span class="h00">indices</span><span class="h10">)</span></span>
<span><span>  </span><span class="h02">delta-synchro</span><span>         </span><span class="h00">Run</span><span> </span><span class="h00">a</span><span> </span><span class="h00">delta</span><span> </span><span class="h00">synchronisation</span><span> </span><span class="h00">by</span><span> </span><span class="h00">calling</span><span> </span><span class="h00">the</span><span> </span><span class="h00">orchestrator</span><span> </span><span class="h00">API</span></span>
<span><span>  </span><span class="h02">id-synchro</span><span>            </span><span class="h00">Run</span><span> </span><span class="h00">an</span><span> </span><span class="h00">ID</span><span> </span><span class="h00">synchronisation</span><span> </span><span class="h00">by</span><span> </span><span class="h00">calling</span><span> </span><span class="h00">the</span><span> </span><span class="h00">orchestrator</span><span> </span><span class="h00">API</span></span>
<span><span>  </span><span class="h02">reindex</span><span>               </span><span class="h00">Reindexes</span><span> </span><span class="h00">documents</span><span> </span><span class="h00">from</span><span> </span><span class="h00">an</span><span> </span><span class="h00">index</span><span> </span><span class="h00">to</span><span> </span><span class="h00">another</span><span> </span><span class="h00">one</span></span>
<span><span>  </span><span class="h02">livestream</span><span>            </span><span class="h00">Produce</span><span> </span><span class="h00">a</span><span> </span><span class="h00">message</span><span> </span><span class="h00">into</span><span> </span><span class="h00">a</span><span> </span><span class="h00">kafka</span><span> </span><span class="h00">livestream</span><span> </span><span class="h00">topic</span><span> </span><span class="h00">to</span><span> </span><span class="h00">update</span><span> </span><span class="h00">a</span><span> </span><span class="h00">document.</span><span> </span><span class="h00">Only</span><span> </span><span class="h00">Siebel</span><span> </span><span class="h00">is</span><span> </span><span class="h00">supported</span><span> </span><span class="h00">for</span><span> </span><span class="h00">now</span></span>
<span><span>  </span><span class="h02">produce</span><span>               </span><span class="h00">Produce</span><span> </span><span class="h00">a</span><span> </span><span class="h00">message</span><span> </span><span class="h00">into</span><span> </span><span class="h00">a</span><span> </span><span class="h00">kafka</span><span> </span><span class="h00">topic</span></span>
<span><span>  </span><span class="h02">search</span><span>                </span><span class="h00">Search</span><span> </span><span class="h00">events</span><span> </span><span class="h00">in</span><span> </span><span class="h00">the</span><span> </span><span class="h00">kafka</span><span> </span><span class="h00">broker</span></span>
<span><span>  </span><span class="h02">deploy</span><span>                </span><span class="h00">Deploy</span><span> </span><span class="h00">an</span><span> </span><span class="h00">application</span><span> </span><span class="h00">on</span><span> </span><span class="h00">a</span><span> </span><span class="h00">given</span><span> </span><span class="h00">environment</span></span>
<span><span>  </span><span class="h02">release</span><span>               </span><span class="h00">Release</span><span> </span><span class="h00">an</span><span> </span><span class="h00">application</span><span> </span><span class="h00">for</span><span> </span><span class="h00">production</span></span>
<span><span>  </span><span class="h02">diff</span><span>                  </span><span class="h00">Show</span><span> </span><span class="h00">differences</span><span> </span><span class="h00">between</span><span> </span><span class="h00">two</span><span> </span><span class="h00">versions</span><span> </span><span class="h00">of</span><span> </span><span class="h00">elasticsearch</span><span> </span><span class="h00">documents</span><span class="h10"> (V2/V6)</span></span>
<span><span>  </span><span class="h02">offline-diff</span><span>          </span><span class="h00">Show</span><span> </span><span class="h00">differences</span><span> </span><span class="h00">between</span><span> </span><span class="h00">two</span><span> </span><span class="h00">local</span><span> </span><span class="h00">json</span><span> </span><span class="h00">files</span></span>
<span><span>  </span><span class="h02">get</span><span>                   </span><span class="h00">Get</span><span> </span><span class="h00">a</span><span> </span><span class="h00">list</span><span> </span><span class="h00">of</span><span> </span><span class="h00">documents</span><span> </span><span class="h00">from</span><span> </span><span class="h00">Elasticsearch</span></span>
<span><span>  </span><span class="h02">switch-aliases</span><span>        </span><span class="h00">Switch</span><span> </span><span class="h00">aliases</span><span> </span><span class="h00">to</span><span> </span><span class="h00">say</span><span> </span><span class="h00">goodbye</span><span> </span><span class="h00">to</span><span> </span><span class="h00">legacy</span><span> </span><span class="h00">applications</span></span>
<span><span>  </span><span class="h02">move-aliases</span><span>          </span><span class="h00">Moves</span><span> </span><span class="h00">aliases</span><span> </span><span class="h00">from</span><span> </span><span class="h00">an</span><span> </span><span class="h00">index</span><span> </span><span class="h00">to</span><span> </span><span class="h00">another.</span><span> </span><span class="h00">A</span><span> </span><span class="h00">generic</span><span> </span><span class="h00">version</span><span> </span><span class="h00">of</span><span> </span><span class="h00">switch-aliases</span></span>
<span><span>  </span><span class="h02">empty-topics</span><span>          </span><span class="h00">Empty</span><span> </span><span class="h00">one</span><span> </span><span class="h00">or</span><span> </span><span class="h00">multiple</span><span> </span><span class="h00">kafka</span><span> </span><span class="h00">topics.</span><span> </span><span class="h00">By</span><span> </span><span class="h00">default,</span><span> </span><span class="h00">this</span><span> </span><span class="h00">command</span><span> </span><span class="h00">lists</span><span> </span><span class="h00">topics</span><span> </span><span class="h00">matching</span><span> </span><span class="h00">your</span><span> </span><span class="h00">regex</span><span> </span><span class="h00">without</span><span> </span><span class="h00">emptying</span><span> </span><span class="h00">them</span></span>
<span><span>  </span><span class="h02">logs</span><span>                  </span><span class="h00">Wrapper</span><span> </span><span class="h00">of</span><span> </span><span class="h00">'oc logs'.</span><span> </span><span class="h00">No</span><span> </span><span class="h00">need</span><span> </span><span class="h00">to</span><span> </span><span class="h00">know</span><span> </span><span class="h00">the</span><span> </span><span class="h00">cluster,</span><span> </span><span class="h00">nor</span><span> </span><span class="h00">the</span><span> </span><span class="h00">namespace,</span><span> </span><span class="h00">nor</span><span> </span><span class="h00">the</span><span> </span><span class="h00">pod</span><span> </span><span class="h00">ID</span></span>
<span><span>  </span><span class="h02">open</span><span>                  </span><span class="h00">Type</span><span> </span><span class="h00">'achraf open recx ak'</span><span> </span><span class="h00">to</span><span> </span><span class="h00">open</span><span> </span><span class="h00">a</span><span> </span><span class="h00">browser</span><span> </span><span class="h00">tab</span><span> </span><span class="h00">for</span><span> </span><span class="h00">you.</span><span> </span><span class="h00">It</span><span> </span><span class="h00">works</span><span> </span><span class="h00">with</span><span> </span><span class="h00">AWX,</span><span> </span><span class="h00">Kibana,</span><span> </span><span class="h00">Openshift,</span><span> </span><span class="h00">Jenkins,</span><span> </span><span class="h00">the</span><span> </span><span class="h00">orchestrator,</span><span> </span><span class="h00">AKHQ...</span></span>
<span><span>  </span><span class="h02">configure</span><span>             </span><span class="h00">Open</span><span> </span><span class="h00">the</span><span> </span><span class="h00">configuration</span><span> </span><span class="h00">file</span></span>
<span><span>  </span><span class="h02">mirror-maker</span><span>          </span><span class="h00">Copy</span><span> </span><span class="h00">records</span><span> </span><span class="h00">published</span><span> </span><span class="h00">on</span><span> </span><span class="h00">a</span><span> </span><span class="h00">specific</span><span> </span><span class="h00">time</span><span> </span><span class="h00">range</span><span> </span><span class="h00">from</span><span> </span><span class="h00">an</span><span> </span><span class="h00">environment</span><span> </span><span class="h00">to</span><span> </span><span class="h00">another</span></span>
<span><span>  </span><span class="h02">vault</span><span>                 </span><span class="h00">Open</span><span> </span><span class="h00">your</span><span> </span><span class="h00">personal</span><span> </span><span class="h00">vault</span></span>
<span><span>  </span><span class="h02">missing</span><span>               </span><span class="h00">Find</span><span> </span><span class="h00">missing</span><span> </span><span class="h00">documents</span><span> </span><span class="h00">in</span><span> </span><span class="h00">DB</span><span> </span><span class="h00">or</span><span> </span><span class="h00">Elasticsearch</span></span>
<span><span>  </span><span class="h02">assyst</span><span>                </span><span class="h00">Declare</span><span> </span><span class="h00">your</span><span> </span><span class="h00">Assyst</span><span> </span><span class="h00">change</span><span> </span><span class="h00">without</span><span> </span><span class="h00">the</span><span> </span><span class="h00">pain</span><span> </span><span class="h00">in</span><span> </span><span class="h00">the</span><span> </span><span class="h00">ass</span></span>
<span><span>  </span><span class="h02">yozefu</span><span>                </span><span class="h00">AKHQ</span><span> </span><span class="h00">but</span><span> </span><span class="h00">butter</span></span>
<span><span>  </span><span class="h02">track-document</span><span>        </span><span class="h00">Track</span><span> </span><span class="h00">every</span><span> </span><span class="h00">update</span><span> </span><span class="h00">of</span><span> </span><span class="h00">a</span><span> </span><span class="h00">elasticsearch</span><span> </span><span class="h00">document</span></span>
<span><span>  </span><span class="h02">vpn</span><span>                   </span><span class="h00">connect</span><span> </span><span class="h00">to</span><span> </span><span class="h00">the</span><span> </span><span class="h00">VPN</span></span>
<span><span>  </span><span class="h02">certificates</span><span>          </span><span class="h00">Download</span><span> </span><span class="h00">the</span><span> </span><span class="h00">keystore</span><span> </span><span class="h00">certificate</span></span>
<span><span>  </span><span class="h03">test</span><span>                  </span><span class="h00">Work</span><span> </span><span class="h00">in</span><span> </span><span class="h00">progress</span></span>
<span><span>  </span><span class="h02">tips</span><span>                  </span><span class="h00">Tips</span><span> </span><span class="h00">about</span><span> </span><span class="h00">achraf</span></span>
<span><span>  </span><span class="h02">json-schema</span><span>           </span><span class="h00">Validate</span><span> </span><span class="h00">your</span><span> </span><span class="h00">json</span><span> </span><span class="h00">files</span></span>
<span><span>  </span><span class="h02">ariane</span><span>                </span><span class="h00">What</span><span> </span><span class="h00">horoquartz</span><span> </span><span class="h00">is</span><span> </span><span class="h00">supposed</span><span> </span><span class="h00">to</span><span> </span><span class="h00">do</span><span> </span><span class="h00">without</span><span> </span><span class="h00">any</span><span> </span><span class="h00">human</span><span> </span><span class="h00">intervention.</span><span> </span><span class="h00">This</span><span> </span><span class="h00">command</span><span> </span><span class="h00">keeps</span><span> </span><span class="h00">track</span><span> </span><span class="h00">of</span><span> </span><span class="h00">telework/office</span><span> </span><span class="h00">hours</span><span> </span><span class="h00">for</span><span> </span><span class="h00">you</span></span>
<span><span>  </span><span class="h02">help</span><span>                  </span><span class="h00">Print</span><span> </span><span class="h00">this</span><span> </span><span class="h00">message</span><span> </span><span class="h00">or</span><span> </span><span class="h00">the</span><span> </span><span class="h00">help</span><span> </span><span class="h00">of</span><span> </span><span class="h00">the</span><span> </span><span class="h00">given</span><span> </span><span class="h00">subcommand</span><span class="h10">(</span><span class="h02">s</span><span class="h10">)</span></span>
<span></span></code></pre></figure><div class="heading"><h2 id="micro-to-macro">Micro to macro</h2><a href="#micro-to-macro" aria-label="Section titled Micro to macro" class="header-anchor"><span></span></a></div><p>L'année dernière, je suis passé lead dev dans une nouvelle équipe. Tout le travail effectué dans mon équipe aurait tombé en poussière.</p><p>Sauf que je voyais ici une opportunité de rendre plus globale l'outil en permettant de l'étendre à d'autres équipes.</p><p>Je me suis inspiré de <code>docker</code> avec la commande <code>context</code>. Ici le contexte permet d'afficher seulement les commandes pertinentes a une équipe donnée.</p><figure class="code-snippet"><span class="language-tag">bash</span><pre><code class="code-block-inner"><span><span class="h04"># Certaines commandes sont partagés par l'ensemble des équipes, commande par exemple `my-cli update`</span></span>
<span><span class="h02">my-cli</span><span> </span><span class="h00">context</span><span> </span><span class="h00">team-a</span><span>     </span><span class="h04"># Les commandes de team-a</span></span>
<span><span class="h02">my-cli</span><span> </span><span class="h00">context</span><span> </span><span class="h00">team-b</span><span>     </span><span class="h04"># Les commandes de team-b</span></span>
<span></span></code></pre></figure><p>En utilisant cette approche, on permet a n'importe qui de contribuer à l'outil en définissant sa propre équipe et par conséquent des commandes avec des besoins spécifiques.</p><div class="heading"><h2 id="cohabition-rust-et-javascript">Cohabition Rust et JavaScript</h2><a href="#cohabition-rust-et-javascript" aria-label="Section titled Cohabition Rust et JavaScript" class="header-anchor"><span></span></a></div><figure class="code-snippet"><span class="language-tag">rust</span><pre><code class="code-block-inner"><span><span class="h09">use</span><span> </span><span class="h02">reqwest</span><span class="h09">::</span><span class="h02">StatusCode</span><span class="h10">;</span></span>
<span><span class="h09">use</span><span> </span><span class="h02">strum</span><span class="h09">::</span><span class="h02">IntoEnumIterator</span><span class="h10">;</span></span>
<span><span class="h09">use</span><span> </span><span class="h02">tracing</span><span class="h09">::</span><span class="h10">error;</span></span>
<span></span>
<span><span class="h09">use</span><span> </span><span class="h02">axum</span><span class="h09">::</span><span class="h10">{</span></span>
<span><span>    </span><span class="h02">Json</span><span class="h10">, </span><span class="h02">Router</span><span class="h10">,</span></span>
<span><span>    </span><span class="h02">extract</span><span class="h09">::</span><span class="h10">{</span><span class="h02">OriginalUri</span><span class="h10">, </span><span class="h02">Path</span><span class="h10">, </span><span class="h02">Query</span><span class="h10">, </span><span class="h02">State</span><span class="h10">},</span></span>
<span><span>    </span><span class="h02">response</span><span class="h09">::</span><span class="h02">Html</span><span class="h10">,</span></span>
<span><span>    </span><span class="h02">routing</span><span class="h09">::</span><span class="h10">get,</span></span>
<span><span class="h10">};</span></span>
<span></span>
<span><span class="h09">use</span><span> </span><span class="h02">serde</span><span class="h09">::</span><span class="h02">Deserialize</span><span class="h10">;</span></span>
<span><span class="h09">use</span><span> </span><span class="h02">serde_json</span><span class="h09">::</span><span class="h02">Value</span><span class="h10">;</span></span>
<span></span>
<span></span>
<span><span class="h09">const</span><span> </span><span class="h03">PORT</span><span class="h09">:</span><span> </span><span class="h02">usize</span><span> </span><span class="h09">=</span><span> </span><span class="h03">9998</span><span class="h10">;</span></span>
<span></span>
<span><span class="h09">pub</span><span> </span><span class="h09">struct</span><span> </span><span class="h02">MyServer</span><span class="h10"> {}</span></span>
<span></span>
<span><span class="h09">impl</span><span> </span><span class="h02">KitsuneUiServer</span><span class="h10"> {</span></span>
<span><span>    </span><span class="h09">pub</span><span> </span><span class="h09">fn</span><span> </span><span class="h02">new</span><span class="h10">() </span><span class="h09">-></span><span> </span><span class="h03">Self</span><span class="h10"> {</span></span>
<span><span>        </span><span class="h03">Self</span><span class="h10"> {  }</span></span>
<span><span class="h10">    }</span></span>
<span></span>
<span><span>    </span><span class="h09">pub</span><span> </span><span class="h09">async</span><span> </span><span class="h09">fn</span><span> </span><span class="h02">serve</span><span class="h10">(</span><span class="h03">self</span><span class="h10">) {</span></span>
<span><span>        </span><span class="h09">let</span><span class="h10"> app </span><span class="h09">=</span><span> </span><span class="h02">Router</span><span class="h09">::</span><span class="h02">new</span><span class="h10">()</span></span>
<span><span>            </span><span class="h09">.</span><span class="h02">route</span><span class="h10">(</span><span class="h00">"/"</span><span class="h10">, </span><span class="h02">get</span><span class="h10">(</span><span class="h03">Self</span><span class="h09">::</span><span class="h10">index))</span></span>
<span><span>            </span><span class="h09">.</span><span class="h02">route</span><span class="h10">(</span><span class="h00">"/api/{*query}"</span><span class="h10">, </span><span class="h02">get</span><span class="h10">(</span><span class="h03">Self</span><span class="h09">::</span><span class="h10">search))</span></span>
<span><span>            </span><span class="h09">.</span><span class="h02">with_state</span><span class="h10">(</span><span class="h03">self</span><span class="h10">);</span></span>
<span></span>
<span><span>        </span><span class="h09">let</span><span class="h10"> listener </span><span class="h09">=</span><span> </span><span class="h02">tokio</span><span class="h09">::</span><span class="h02">net</span><span class="h09">::</span><span class="h02">TcpListener</span><span class="h09">::</span><span class="h02">bind</span><span class="h10">(</span><span class="h02">format!</span><span class="h10">(</span><span class="h00">"0.0.0.0:{PORT}"</span><span class="h10">))</span></span>
<span><span>            </span><span class="h09">.await</span></span>
<span><span>            </span><span class="h09">.</span><span class="h02">unwrap</span><span class="h10">();</span></span>
<span><span>        </span><span class="h02">axum</span><span class="h09">::</span><span class="h02">serve</span><span class="h10">(listener, app)</span><span class="h09">.await.</span><span class="h02">unwrap</span><span class="h10">();</span></span>
<span><span class="h10">    }</span></span>
<span></span>
<span><span>    </span><span class="h09">async</span><span> </span><span class="h09">fn</span><span> </span><span class="h02">index</span><span class="h10">() </span><span class="h09">-></span><span> </span><span class="h02">Html</span><span class="h10">&lt;</span><span class="h09">&</span><span class="h10">'</span><span class="h02">static</span><span> </span><span class="h02">str</span><span class="h10">> {</span></span>
<span><span>        </span><span class="h02">Html</span><span class="h10">(</span><span class="h02">include_str!</span><span class="h10">(</span><span class="h00">"../../../../kitsune-ui/dist/index.html"</span><span class="h10">))</span></span>
<span><span class="h10">    }</span></span>
<span><span class="h10">}</span></span>
<span></span></code></pre></figure><figure class="code-snippet"><span class="language-tag">JS</span><pre><code class="code-block-inner"><span><span class="h09">import</span><span class="h10"> { defineConfig } </span><span class="h09">from</span><span> </span><span class="h00">"vite"</span><span class="h10">;</span></span>
<span><span class="h09">import</span><span class="h10"> react </span><span class="h09">from</span><span> </span><span class="h00">"@vitejs/plugin-react"</span><span class="h10">;</span></span>
<span><span class="h09">import</span><span class="h10"> { viteSingleFile } </span><span class="h09">from</span><span> </span><span class="h00">"vite-plugin-singlefile"</span><span class="h10">;</span></span>
<span></span>
<span><span class="h09">export</span><span> </span><span class="h09">default</span><span> </span><span class="h02">defineConfig</span><span class="h10">({</span></span>
<span><span class="h10">  plugins: [</span></span>
<span><span>    </span><span class="h02">react</span><span class="h10">(),</span></span>
<span><span>    </span><span class="h02">viteSingleFile</span><span class="h10">(),</span></span>
<span><span class="h10">  ],</span></span>
<span><span class="h10">  preview: {</span></span>
<span><span class="h10">    port: </span><span class="h03">5173</span><span class="h10">,</span></span>
<span><span class="h10">  }</span></span>
<span><span class="h10">});</span></span>
<span></span></code></pre></figure><div class="heading"><h2 id="conclusion">Conclusion</h2><a href="#conclusion" aria-label="Section titled Conclusion" class="header-anchor"><span></span></a></div><ul><li><p>https://clig.dev/: Le guide pour concevoir des CLIs</p></li></ul></article></main><footer class="container"><div class="social-networks"><a href="/index.xml" aria-label="RSS feed"><svg class="icon rss"><use href="/assets/images/icons-6184648945.svg#rss"></use></svg> </a><a href="https://github.com/mcdostone" aria-label="github profile" rel="noopener noreferrer" target="_blank"><svg class="icon github"><use href="/assets/images/icons-6184648945.svg#github"></use></svg> </a><a href="https://pouet.chapril.org/@yannp" aria-label="Mastodon" rel="noopener noreferrer" target="_blank"><svg class="icon mastodon"><use href="/assets/images/icons-6184648945.svg#mastodon"></use></svg> </a><a href="https://bsky.app/profile/mcdostone.bsky.social" aria-label="Bluesky" rel="noopener noreferrer" target="_blank"><svg class="icon bluesky"><use href="/assets/images/icons-6184648945.svg#bluesky"></use></svg> </a><a href="https://www.root-me.org/Mcdostone" aria-label="Root-me" rel="noopener noreferrer" target="_blank"><svg class="icon root-me"><use href="/assets/images/icons-6184648945.svg#root-me"></use></svg></a></div></footer></body></html>