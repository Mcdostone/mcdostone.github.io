import{n as t,t as e,i as s,x as i}from"../../../class-map-Bb_izowS.js";import{r as o}from"../../../state-DNgjoE77.js";import"./topic.ts-CRKKivGB.js";var r=Object.defineProperty,c=Object.getOwnPropertyDescriptor,n=(t,e,s,i)=>{for(var o,n=i>1?void 0:i?c(e,s):e,h=t.length-1;h>=0;h--)(o=t[h])&&(n=(i?o(e,s,n):o(n))||n);return i&&n&&r(e,s,n),n};let h=class extends s{constructor(){super(),this.published=0,this.consumed=-1,this._empty=this._empty.bind(this),this.observer=null}createRenderRoot(){return this}_empty(t){this.published=0,this.consumed=-1}firstUpdated(){this.observer=new IntersectionObserver((t=>{t.forEach((t=>{this.used||t.target.classList.toggle("in-view",t.isIntersecting)}))}),{threshold:.2,rootMargin:"400px 0px 400px 0px"}),this.querySelectorAll(".invite-to-click").forEach((t=>{this.observer.observe(t)}))}disconnectedCallback(){super.disconnectedCallback(),this.observer&&this.observer.disconnect()}_publish(t){this.published+=1,this._clean()}_clean(){this.querySelectorAll(".invite-to-click").forEach((t=>{t.classList.remove("in-view")})),this.used=!0}_consume(t){this.consumed<this.published-1&&(this.consumed+=1,this._clean())}render(){const t=i`<div class="invite-to-click"><p>Click the buttons to see the topic in action!</p><svg width="148" height="82" viewBox="0 0 148 82" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 59C107.148 109 130.478 57.8792 126.648 3.87915M126.648 3.87915L107.148 24.3792M126.648 3.87915L144.648 24.3792" stroke="currentColor" stroke-width="5" stroke-linecap="round"/></svg></div>`;return i`<div class="actor"><button class="button" role="button" @click="${this._publish}">Produce 🏭</button></div><my-topic .empty="${this._empty}" .published="${this.published}" .consumed="${this.consumed}" .name="${this.name}"></my-topic><div class="actor"><span></span><button class="button" role="button" @click="${this._consume}">🏭 Consume</button></div>${t} ${t}`}};n([t()],h.prototype,"name",2),n([o()],h.prototype,"published",2),n([o()],h.prototype,"consumed",2),h=n([e("my-topic-with-actors")],h);
