<!DOCTYPE html><html class="" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="Yann Prono" property="og:site_name"><meta content="en-us" property="og:locale"><meta content="article" property="og:type"><meta content="https://mcdostone.github.io/articles/after-effects-date/" property="og:url"><meta content="Yann Prono" property="og:title"><meta content="https:/mcdostone.github.io/assets/images/og-image.jpg" property="og:image"><meta content="452" property="og:image:width"><meta content="452" property="og:image:height"><meta content="Adobe After Effects scripting has never been so easy." property="og:description"><meta content="summary" property="twitter:card"><meta content="https:/mcdostone.github.io/assets/images/og-image.jpg" property="twitter:image"><meta content="Yann Prono" property="twitter:title"><meta content="Adobe After Effects scripting has never been so easy." property="twitter:description"><meta content="Adobe After Effects scripting has never been so easy." name="description"><title>Adobe After Effects and JavaScript | Yann Prono</title><link href="/favicon-bfe765527d.svg" rel="icon" type="image/svg+xml"><link href="https://mcdostone.github.io/index.xml" rel="alternate" type="application/atom+xml" title="Atom feed"><script defer src="/assets/js/dark-0c32b4e2.js" type="module"></script><link href="/assets/css/style-d823d69a.css" rel="stylesheet"><link href="/articles/after-effects-date/assets/style-dee57b28.css" rel="stylesheet"></head><body><header class="header"><div class="container"><div><a href="/" class="active">Blog</a></div></div></header><main class="article-container"><article><header class=""><h1>Adobe After Effects and JavaScript</h1><time class="article-published-on" datetime="2022-08-04">August 4, 2022</time></header><p>On January 1st 2021, I challenged myself: record 1 second of video every day for the entire 2021 year and compile them into a <a href="https://www.youtube.com/watch?v=47ibFGy-w18&t=35">single film</a>. I really enjoyed achieving this idea: It felt great to make something a little creative since I'm not at all, I could get familiar with my camera, I still love video editing and it was a perfect reason to say <em>hello</em> to my family/friends. Finally, it was even more exciting since I kept the challenge secret.</p><p>But enough storytelling, Let's get to the point of this article: Something I wanted for this video is the current date the video was taken. And of course, changing 365 times the text layer in my Adobe project was not part of the plan. So let's explore how to automate this tedious task in Adobe After Effects.</p><h2 id="scripting-in-adobe-applications" tabindex="-1">Scripting in Adobe applications <a href="#scripting-in-adobe-applications" aria-label="anchor" class="header-anchor"><span></span></a></h2><p>When I was a student, I learned that Adobe applications come with a scripting language named ExtendScript. Even though the language was syntactically close to JavaScript, I didn't even try it. The reason? With the <a href="https://www.instagram.com/tncystudio/">Studio crew</a>, we were very focused on investigating all the secrets of a light hoppy drink, with a drawing of the flying dutchman on the bottle.</p><p>Since October 2018, no more excuses: most Adobe applications <strong>embed a JavaScript engine</strong> (V8 or JavaScriptCore), which means we can write modern JS and use the latest features.</p><h2 id="generating-the-date" tabindex="-1">Generating the date <a href="#generating-the-date" aria-label="anchor" class="header-anchor"><span></span></a></h2><p>It means I should be able to generate all the dates with a few lines of code. I would write something like this if my target was the browser's runtime:</p><figure class="code-snippet"><span class="language-tag">TS</span><pre><code class="code-block-inner"><span class="line"><span class="h69">function</span><span class="h33"> </span><span class="h4a">generateDate</span><span class="h33">(</span><span class="h64">time</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> </span><span class="h07">0</span><span class="h33">) {</span></span>
<span class="line"><span class="h33">  </span><span class="h69">const</span><span class="h33"> </span><span class="h07">date</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> </span><span class="h69">new</span><span class="h33"> </span><span class="h07">Date</span><span class="h33">(</span><span class="h07">2021</span><span class="h33">, </span><span class="h07">0</span><span class="h33">, </span><span class="h07">1</span><span class="h33">)</span></span>
<span class="line"><span class="h33">  date.</span><span class="h4a">setDate</span><span class="h33">(date.</span><span class="h4a">getDate</span><span class="h33">() </span><span class="h69">+</span><span class="h33"> </span><span class="h07">Math</span><span class="h33">.</span><span class="h07">floor</span><span class="h33">(time))</span></span>
<span class="line"><span class="h33">  </span><span class="h69">const</span><span class="h33"> </span><span class="h07">options</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> { month: </span><span class="hbb">'long'</span><span class="h33">, day: </span><span class="hbb">'numeric'</span><span class="h33"> }</span></span>
<span class="line"><span class="h33">  </span><span class="h69">return</span><span class="h33"> date.</span><span class="h4a">toLocaleDateString</span><span class="h33">(</span><span class="hbb">'en-US'</span><span class="h33">, options) </span><span class="h7a">// January 1</span></span>
<span class="line"><span class="h33">}</span></span>
<span class="line"></span></code></pre></figure><figure><div class="after-effects"><div class="viewer"><p class="date"></p></div><input id="timeline" max="8759" min="0" name="timeline" type="range" value="0"></div><figcaption>The rendering of the timeline is better on Firefox, I'm just saying...</figcaption></figure><p>But here the code will run in the Adobe application, not a web browser. It means also that Adobe runtime exposes <a href="https://helpx.adobe.com/after-effects/using/expression-language-reference.html#global_objects_attributes_and_methods_expression_reference">APIs and data</a> to the program. One missing information here is the <code>time</code> variable. It must correspond to the current time of the composition. According to the documentation, <code>time</code> is a global variable representing the composition time, in seconds. That's exactly what I need:</p><figure class="code-snippet"><span class="language-tag">JS</span><pre><code class="code-block-inner"><span class="line"><span class="h7a">// 'time' is a global variable</span></span>
<span class="line"><span class="h69">const</span><span class="h33"> </span><span class="h07">date</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> </span><span class="h69">new</span><span class="h33"> </span><span class="h07">Date</span><span class="h33">(</span><span class="h07">2021</span><span class="h33">, </span><span class="h07">0</span><span class="h33">, </span><span class="h07">1</span><span class="h33">)</span></span>
<span class="line"><span class="h69">const</span><span class="h33"> </span><span class="h07">options</span><span class="h33"> </span><span class="h69">=</span><span class="h33"> { month: </span><span class="hbb">'long'</span><span class="h33">, day: </span><span class="hbb">'numeric'</span><span class="h33"> }</span></span>
<span class="line"><span class="h33">date.</span><span class="h4a">setDate</span><span class="h33">(date.</span><span class="h4a">getDate</span><span class="h33">() </span><span class="h69">+</span><span class="h33"> </span><span class="h07">Math</span><span class="h33">.</span><span class="h07">floor</span><span class="h33">(time))</span></span>
<span class="line"><span class="h33">date.</span><span class="h4a">toLocaleDateString</span><span class="h33">(</span><span class="hbb">'en-US'</span><span class="h33">, options)</span></span>
<span class="line"></span></code></pre></figure><video controls height="1080" width="1920"><source src="/articles/after-effects-date/assets/demo-cc6b1c0938.mp4" type="video/mp4">Sorry, your browser doesn't support embedded videos.</video><script>"use strict";function getDate(e){const t=new Date(2021,0,1);t.setDate(t.getDate()+Math.floor(e));return t.toLocaleDateString("en-US",{month:"long",day:"numeric"})}const date=document.querySelector(".viewer .date"),cursor=document.querySelector("#timeline");date.innerHTML=getDate(cursor.value),cursor.addEventListener("input",(e=>{const t=e.target;date.innerHTML=getDate(t.value/24)}));</script><blockquote><p><strong>Note for never</strong>: I wonder if we can import external libraries: imagine the limitless possibilities ahead of me if I can generate NFT videos with the library <a href="https://www.npmjs.com/package/is-odd">is-odd</a> or <a href="https://momentjs.com/">moment</a>...</p></blockquote><p>I'm glad I wasn't the robot on this task.</p></article></main><footer class="container"><div class="social-networks"><a href="https://github.com/mcdostone" aria-label="github"><svg class="icon github"><use href="/assets/images/icons-231b49900a.svg#github"></use></svg> </a><a href="/index.xml" aria-label="rss"><svg class="icon rss"><use href="/assets/images/icons-231b49900a.svg#rss"></use></svg></a><div class="theme-selector"><button aria-label="Open a dialog box to choose a theme" type="button" aria-haspopup="menu"><svg class="icon theme"><use href="/assets/images/icons-231b49900a.svg#theme-light"></use></svg></button><dialog><form method="dialog"><button aria-label="switch to OS theme" type="button" value="" aria-selected=""><svg><use href="/assets/images/icons-231b49900a.svg#theme-system"></use></svg>OS Default</button> <button aria-label="switch to light theme" type="button" value="light"><svg><use href="/assets/images/icons-231b49900a.svg#theme-light"></use></svg>Light</button> <button aria-label="switch to dark theme" type="button" value="dark"><svg><use href="/assets/images/icons-231b49900a.svg#theme-dark"></use></svg>Dark</button></form></dialog></div></div></footer></body></html>