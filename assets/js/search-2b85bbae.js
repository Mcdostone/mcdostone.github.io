const e={};class t{constructor(e,t){this.searchDialog=t,this.input=this.searchDialog.querySelector("input"),this.data=e,this.iconsUrl=this.searchDialog.querySelector("label use").getAttribute("href").split("#")[0],this.template=document.createElement("template"),this.template.innerHTML='<li><a><svg><use href="/assets/images/icons.svg" /></svg><span class="title"></span><span class="description"></a></li>',this.results=this.searchDialog.querySelector(".results"),this.input.addEventListener("input",(e=>{const t=e.target.value.toLowerCase();this.results.innerHTML="",this.showResults(t)}))}search(e){const t=new RegExp(`${e}`,"gi");return this.data.filter((e=>t.test(e.title)||t.test(e.description)||t.test(e.text)))}isExternal(e){try{if(new URL(e).origin!==location.origin)return!0}catch{}return!1}showResults(e){if(e.length<=2)return;const t=this.search(e);for(const s of t){const e=this.template.content.cloneNode(!0),t=e.querySelector("a");t.href=s.url,this.isExternal(t.href)&&(t.target="_blank",t.rel="noopener noreferrer"),e.querySelector("use").setAttribute("href",`${this.iconsUrl}#${s.type}`),e.querySelector(".title").innerHTML=s.title,e.querySelector(".description").innerHTML=s.description,this.results.append(e)}}}let s;const n=document.querySelector("#search-dialog");n.addEventListener("click",(e=>{if(n.open){const t=e.target,s=t.getBoundingClientRect();!1==(s.top<=e.clientY&&e.clientY<=s.top+s.height&&s.left<=e.clientX&&e.clientX<=s.left+s.width)&&t.close()}})),document.addEventListener("keydown",(async function(r){(r.ctrlKey&&"k"===r.key||r.metaKey&&"k"===r.key)&&(r.preventDefault(),s=await async function(s,n){if(void 0===s){await(r=()=>Promise.resolve({}),i=["assets/css/search-f059746c.css"],i&&0!==i.length?(document.getElementsByTagName("link"),Promise.all(i.map((t=>{if((t="/"+t)in e)return;e[t]=!0;const s=t.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const r=document.createElement("link");return r.rel=s?"stylesheet":"modulepreload",s||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),s?new Promise(((e,s)=>{r.addEventListener("load",e),r.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${t}`))))})):void 0}))).then((()=>r()))):r());const o=await fetch(n.dataset.endpoint).then((e=>e.json()));s=new t(o,n)}var r,i;return s}(s,n),n.open?n.close():n.showModal())}));
